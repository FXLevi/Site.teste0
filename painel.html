<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Painel do Guarda</title>
  <style>
    body {
      background-color: #0f172a;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    /* üçî Hamburguer estilizado */
    #checkbox {
      display: none;
    }

    .toggle {
      position: fixed;
      top: 15px;
      left: 20px;
      width: 40px;
      height: 40px;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 10px;
      z-index: 1000;
      transition-duration: 0.3s;
    }

    .bars {
      width: 100%;
      height: 4px;
      background-color: #f3f4f6;
      border-radius: 5px;
      transition-duration: 0.3s;
    }

    #checkbox:checked + .toggle #bar2 {
      transform: translateY(14px) rotate(60deg);
      transform-origin: right;
      z-index: 2;
    }

    #checkbox:checked + .toggle #bar1 {
      transform: translateY(28px) rotate(-60deg);
      transform-origin: left;
      z-index: 1;
    }

    #checkbox:checked + .toggle {
      transform: rotate(-90deg);
    }

    /* üìÇ Menu lateral */
    .sidebar {
      position: fixed;
      top: 0;
      left: -200px;
      width: 140px;
      height: 100%;
      background-color: #2c3e50;
      color: white;
      padding: 80px 20px 20px;
      transition: left 0.3s ease;
      z-index: 999;
    }

    .sidebar.open {
      left: 0;
    }

    .sidebar h3 {
      margin-top: 0;
      font-size: 1.4rem;
      font-weight: bold;
      margin-bottom: 25px;
    }

    .sidebar ul {
      list-style: none;
      padding-left: 0;
    }

    .sidebar ul li {
      margin-bottom: 12px;
    }

    .sidebar ul li button {
      background: none;
      border: none;
      color: white;
      font: inherit;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: 600;
    }

    /* üßæ Painel central */
    .form-container {
      width: 320px;
      margin: 140px auto;
      border-radius: 0.75rem;
      background-color: #111827;
      padding: 2.5rem;
      color: #f3f4f6;
    }

    .title {
      text-align: center;
      font-size: 1.6rem;
      font-weight: 700;
    }

    .form {
      margin-top: 2rem;
    }

    label {
      display: block;
      font-size: 0.875rem;
      color: #9ca3af;
      margin-bottom: 4px;
    }

    input[type="date"],
    select,
    input[type="file"] {
      width: 100%;
      border-radius: 0.375rem;
      border: 1px solid #374151;
      background-color: #111827;
      padding: 0.75rem 1rem;
      color: #f3f4f6;
      outline: none;
      margin-bottom: 1.5rem;
    }

    input:focus,
    select:focus {
      border-color: #a78bfa;
    }

    .preview-image {
      display: block;
      margin: 0 auto 20px;
      width: 150px;
      height: 150px;
      object-fit: cover;
      border-radius: 10px;
      border: 2px solid #374151;
    }

    .sign {
      display: block;
      width: 100%;
      background-color: #a78bfa;
      padding: 0.75rem;
      text-align: center;
      color: #111827;
      border: none;
      border-radius: 0.375rem;
      font-weight: 600;
      cursor: pointer;
      margin-top: 1rem;
    }
  </style>
</head>
<body>

  <!-- ‚ò∞ Hamb√∫rguer -->
  <input id="checkbox" type="checkbox">
  <label class="toggle" for="checkbox">
    <div id="bar1" class="bars"></div>
    <div id="bar2" class="bars"></div>
    <div id="bar3" class="bars"></div>
  </label>

  <!-- üìÅ Menu lateral -->
  <div class="sidebar" id="sidebar">
    <h3>Menu</h3>
    <ul>
      <li><button onclick="abrirEventos()">üìÖ Eventos</button></li>
      <li><button onclick="abrirEstatisticas()">üìä Estat√≠sticas</button></li>
      <li>‚öôÔ∏è Configura√ß√µes</li>
    </ul>
  </div>

  <!-- üß© Painel -->
  <div class="form-container">
    <div class="form">
      <img id="fotoTopo" src="https://via.placeholder.com/150" class="preview-image">
      <p class="title">Painel do Guarda</p>

      <label for="data">Data:</label>
      <input type="date" id="data">

      <label for="comunidade">Comunidade onde serviu:</label>
      <select id="comunidade">
        <option value="">Selecione uma comunidade</option>
        <option>Imaculada Concei√ß√£o</option>
        <option>Nossa Senhora Aparecida</option>
        <option>Nossa Senhora das Gra√ßas</option>
        <option>Nossa Senhora de F√°tima</option>
        <option>Par√≥quia/Matriz de Nazar√©</option>
        <option>Santa Dulce dos Pobres</option>
        <option>Santa Gianna Beretta</option>
        <option>Santo Ant√¥nio</option>
        <option>S√£o Bento</option>
        <option>S√£o Bernardo</option>
        <option>S√£o Francisco</option>
        <option>S√£o Jo√£o Batista</option>
        <option>S√£o Jo√£o Paulo II</option>
        <option>S√£o Jos√©</option>
        <option>S√£o Jos√© Oper√°rio</option>
        <option>S√£o Miguel Arcanjo</option>
        <option>S√£o Sebasti√£o</option>
      </select>

      <label for="foto">Foto:</label>
      <input type="file" id="foto" accept="image/*" onchange="previewFoto()">

      <button class="sign" onclick="salvarServico(); enviarParaPlanilha()">Enviar</button>
    </div>
  </div>

  <script>
    // Ativar/desativar menu lateral
    document.getElementById("checkbox").addEventListener("change", function () {
      document.getElementById("sidebar").classList.toggle("open", this.checked);
    });

    function abrirEventos() {
      window.location.href = "eventos.html";
    }

    function abrirEstatisticas() {
      window.location.href = "estatisticas.html";
    }

    let fotoBase64 = "";

    function previewFoto() {
      const file = document.getElementById("foto").files[0];
      const reader = new FileReader();
      reader.onload = function () {
        fotoBase64 = reader.result;
        document.getElementById("fotoTopo").src = fotoBase64;
      };
      if (file) reader.readAsDataURL(file);
    }

    function salvarServico() {
      const comunidade = document.getElementById("comunidade").value;
      if (comunidade === "") {
        alert("Selecione uma comunidade.");
        return;
      }
      let historico = JSON.parse(localStorage.getItem("historicoServicos")) || [];
      historico.push(comunidade);
      localStorage.setItem("historicoServicos", JSON.stringify(historico));
      alert("Servi√ßo registrado localmente!");
    }

    function enviarParaPlanilha() {
      const data = document.getElementById("data").value;
      const comunidade = document.getElementById("comunidade").value;

      if (!comunidade || !data || !fotoBase64) {
        alert("Preencha todos os campos e envie uma foto!");
        return;
      }

      fetch("https://script.google.com/macros/s/AKfycbwADXb-iZ94SelXqm1HmwywH18dM8gWbhB2awXK9dCAkpC1h9EIfpAIQWbsYUeQDYQ/exec", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON
